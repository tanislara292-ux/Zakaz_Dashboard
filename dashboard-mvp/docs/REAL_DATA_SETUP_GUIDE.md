# –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ —Ä–µ–∞–ª—å–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö –¥–ª—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

## –û–±–∑–æ—Ä

–î–æ–∫—É–º–µ–Ω—Ç —Å–æ–¥–µ—Ä–∂–∏—Ç –ø–æ—à–∞–≥–æ–≤—ã–µ –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ –Ω–∞—Å—Ç—Ä–æ–π–∫–µ –≤—Å–µ—Ö —Ç–æ–∫–µ–Ω–æ–≤ API –∏ —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏ –¥–ª—è —Ä–∞–±–æ—Ç—ã —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏ –∏–∑ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤ QTickets, VK Ads, –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç –∏ Google Sheets.

## –ü—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

### –û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

1. **Google Sheets**:
   - Email: chufarovk@gmail.com (Editor)
   - URL: https://docs.google.com/spreadsheets/d/1Ov6Fsb97KXyQx8UKOoy4JKLVpoLVUnn6faKH6C4gqVc

2. **Yandex DataLens**:
   - Email: ads-irsshow@yandex.ru (Editor)
   - Email: irs20show24 (Editor)
   - ID: (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å)

3. **–°—á–µ—Ç—á–∏–∫–∏ –ú–µ—Ç—Ä–∏–∫–∏**:
   - Email: lazur.estate@yandex.ru (—Ä–∞—Å—à–∞—Ä–µ–Ω)

4. **–î–æ—Å—Ç—É–ø –∫ –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç**:
   - Email: ads-irsshow@yandex.ru
   - Email: irs20show24

5. **QTickets**:
   - API —Ç–æ–∫–µ–Ω: 4sUsl5DFJA8DTUlXa3ZOANcILE0g1TKZ

6. **VK Ads**:
   - API —Ç–æ–∫–µ–Ω: (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å)
   - ID —Ä–µ–∫–ª–∞–º–Ω–æ–≥–æ –∫–∞–±–∏–Ω–µ—Ç–∞: (—Ç—Ä–µ–±—É–µ—Ç—Å—è –ø–æ–ª—É—á–∏—Ç—å)
   - Email: lazur.estate@yandex.ru

7. **VPS**:
   - –•–æ—Å—Ç: firstvds.ru
   - –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å: ads-irsshow@yandex.ru
   - –ü–∞—Ä–æ–ª—å: irs20show25

## –§–∞–π–ª—ã –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

### 1. QTickets (`secrets/.env.qtickets`)

```bash
# QTickets API Configuration

# API —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ QTickets API
QTICKETS_TOKEN=4sUsl5DFJA8DTUlXa3ZOANcILE0g1TKZ

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
QTICKETS_DAYS_BACK=30

# URL API QTickets
QTICKETS_API_URL=https://api.qtickets.ru/v1

# –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
QTICKETS_TIMEOUT=30

# –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö (csv, xlsx)
QTICKETS_FORMAT=csv

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_LEVEL=INFO
LOG_JSON=false
LOG_FILE=logs/qtickets.log
```

### 2. VK Ads (`secrets/.env.vk`)

```bash
# VK Ads API Configuration

# API —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ VK Ads API
VK_TOKEN=your_vk_ads_api_token_here

# ID —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
VK_ACCOUNT_IDS=123456789,987654321

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
VK_DAYS_BACK=30

# URL API VK Ads
VK_API_URL=https://api.vk.com/method

# –í–µ—Ä—Å–∏—è API VK
VK_API_VERSION=5.131

# –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
VK_TIMEOUT=30

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_LEVEL=INFO
LOG_JSON=false
LOG_FILE=logs/vk_ads.log
```

### 3. –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç (`secrets/.env.direct`)

```bash
# Yandex Direct API Configuration

# –õ–æ–≥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç
DIRECT_LOGIN=ads-irsshow@yandex.ru

# –¢–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç
DIRECT_TOKEN=your_yandex_direct_api_token_here

# ID –∫–ª–∏–µ–Ω—Ç–∞ (–µ—Å–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–≥–µ–Ω—Ç—Å–∫–∏–π –∞–∫–∫–∞—É–Ω—Ç)
DIRECT_CLIENT_ID=your_client_id_here

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
DIRECT_DAYS_BACK=30

# URL API –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç
DIRECT_API_URL=https://api.direct.yandex.ru/json/v5

# –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
DIRECT_TIMEOUT=30

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_LEVEL=INFO
LOG_JSON=false
LOG_FILE=logs/direct.log
```

### 4. Google Sheets (`secrets/.env.sheets`)

```bash
# Google Sheets Configuration

# ID Google —Ç–∞–±–ª–∏—Ü—ã
GOOGLE_SHEETS_ID=1Ov6Fsb97KXyQx8UKOoy4JKLVpoLVUnn6faKH6C4gqVc

# Email –¥–ª—è –¥–æ—Å—Ç—É–ø–∞
GOOGLE_EMAIL=chufarovk@gmail.com

# –ò–º—è –ª–∏—Å—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
GOOGLE_SHEET_NAME=–õ–∏—Å—Ç1

# –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞–Ω–Ω—ã—Ö
GOOGLE_RANGE=A:Z

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_LEVEL=INFO
LOG_JSON=false
LOG_FILE=logs/sheets.log
```

### 5. VPS (`secrets/.env.vps`)

```bash
# VPS Configuration

# –•–æ—Å—Ç VPS
VPS_HOST=firstvds.ru

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å VPS
VPS_USER=ads-irsshow@yandex.ru

# –ü–∞—Ä–æ–ª—å VPS
VPS_PASSWORD=irs20show25

# –ü–æ—Ä—Ç SSH
VPS_SSH_PORT=22

# –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
VPS_TIMEZONE=Europe/Moscow
```

## –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏ –ø–æ —Å–æ–∑–¥–∞–Ω–∏—é —Ñ–∞–π–ª–æ–≤

### –®–∞–≥ 1: –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ secrets

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–∏ –¥–ª—è —Å–µ–∫—Ä–µ—Ç–æ–≤
mkdir -p dashboard-mvp/secrets
```

### –®–∞–≥ 2: –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –¥–ª—è QTickets
cat > dashboard-mvp/secrets/.env.qtickets << 'EOF'
# QTickets API Configuration

# API —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ QTickets API
QTICKETS_TOKEN=4sUsl5DFJA8DTUlXa3ZOANcILE0g1TKZ

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
QTICKETS_DAYS_BACK=30

# URL API QTickets
QTICKETS_API_URL=https://api.qtickets.ru/v1

# –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
QTICKETS_TIMEOUT=30

# –§–æ—Ä–º–∞—Ç –¥–∞–Ω–Ω—ã—Ö (csv, xlsx)
QTICKETS_FORMAT=csv

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_LEVEL=INFO
LOG_JSON=false
LOG_FILE=logs/qtickets.log
EOF

# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –¥–ª—è VK Ads
cat > dashboard-mvp/secrets/.env.vk << 'EOF'
# VK Ads API Configuration

# API —Ç–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ VK Ads API
VK_TOKEN=your_vk_ads_api_token_here

# ID —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤ (—á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é)
VK_ACCOUNT_IDS=123456789,987654321

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
VK_DAYS_BACK=30

# URL API VK Ads
VK_API_URL=https://api.vk.com/method

# –í–µ—Ä—Å–∏—è API VK
VK_API_VERSION=5.131

# –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
VK_TIMEOUT=30

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_LEVEL=INFO
LOG_JSON=false
LOG_FILE=logs/vk_ads.log
EOF

# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –¥–ª—è –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç
cat > dashboard-mvp/secrets/.env.direct << 'EOF'
# Yandex Direct API Configuration

# –õ–æ–≥–∏–Ω –∞–∫–∫–∞—É–Ω—Ç–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç
DIRECT_LOGIN=ads-irsshow@yandex.ru

# –¢–æ–∫–µ–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ API –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç
DIRECT_TOKEN=your_yandex_direct_api_token_here

# –ö–æ–ª–∏—á–µ—Å—Ç–≤–æ –¥–Ω–µ–π –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö
DIRECT_DAYS_BACK=30

# URL API –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç
DIRECT_API_URL=https://api.direct.yandex.ru/json/v5

# –¢–∞–π–º–∞—É—Ç –∑–∞–ø—Ä–æ—Å–æ–≤ –≤ —Å–µ–∫—É–Ω–¥–∞—Ö
DIRECT_TIMEOUT=30

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_LEVEL=INFO
LOG_JSON=false
LOG_FILE=logs/direct.log
EOF

# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –¥–ª—è Google Sheets
cat > dashboard-mvp/secrets/.env.sheets << 'EOF'
# Google Sheets Configuration

# ID Google —Ç–∞–±–ª–∏—Ü—ã
GOOGLE_SHEETS_ID=1Ov6Fsb97KXyQx8UKOoy4JKLVpoLVUnn6faKH6C4gqVc

# Email –¥–ª—è –¥–æ—Å—Ç—É–ø–∞
GOOGLE_EMAIL=chufarovk@gmail.com

# –ò–º—è –ª–∏—Å—Ç–∞ —Å –¥–∞–Ω–Ω—ã–º–∏
GOOGLE_SHEET_NAME=–õ–∏—Å—Ç1

# –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞–Ω–Ω—ã—Ö
GOOGLE_RANGE=A:Z

# –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏—è
LOG_LEVEL=INFO
LOG_JSON=false
LOG_FILE=logs/sheets.log
EOF

# –°–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–∞ –¥–ª—è VPS
cat > dashboard-mvp/secrets/.env.vps << 'EOF'
# VPS Configuration

# –•–æ—Å—Ç VPS
VPS_HOST=firstvds.ru

# –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å VPS
VPS_USER=ads-irsshow@yandex.ru

# –ü–∞—Ä–æ–ª—å VPS
VPS_PASSWORD=irs20show25

# –ü–æ—Ä—Ç SSH
VPS_SSH_PORT=22

# –ß–∞—Å–æ–≤–æ–π –ø–æ—è—Å
VPS_TIMEZONE=Europe/Moscow
EOF
```

### –®–∞–≥ 3: –ü–æ–ª—É—á–µ–Ω–∏–µ –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏—Ö —Ç–æ–∫–µ–Ω–æ–≤

#### VK Ads —Ç–æ–∫–µ–Ω

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ VK Ads: https://ads.vk.com/
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí API ‚Üí –°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∞: statistics, campaigns, ads
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ —Ç–æ–∫–µ–Ω –≤ —Ñ–∞–π–ª `secrets/.env.vk`

#### ID —Ä–µ–∫–ª–∞–º–Ω—ã—Ö –∫–∞–±–∏–Ω–µ—Ç–æ–≤ VK Ads

1. –í VK Ads: –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí –†–µ–∫–ª–∞–º–Ω—ã–µ –∫–∞–±–∏–Ω–µ—Ç—ã
2. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ ID –∫–∞–±–∏–Ω–µ—Ç–æ–≤ —á–µ—Ä–µ–∑ –∑–∞–ø—è—Ç—É—é
3. –í—Å—Ç–∞–≤—å—Ç–µ –≤ `VK_ACCOUNT_IDS` –≤ —Ñ–∞–π–ª–µ `secrets/.env.vk`

#### –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç —Ç–æ–∫–µ–Ω

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç: https://direct.yandex.ru/
2. –ù–∞—Å—Ç—Ä–æ–π–∫–∏ ‚Üí API ‚Üí –°–æ–∑–¥–∞—Ç—å —Ç–æ–∫–µ–Ω
3. –í—ã–±–µ—Ä–∏—Ç–µ –ø—Ä–∞–≤–∞: campaigns, reports, stats
4. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –ª–æ–≥–∏–Ω –∏ —Ç–æ–∫–µ–Ω –≤ —Ñ–∞–π–ª `secrets/.env.direct`

## –®–∞–±–ª–æ–Ω—ã UTM-–º–µ—Ç–æ–∫

### –§–æ—Ä–º–∞—Ç UTM-–º–µ—Ç–æ–∫

–í—Å–µ –∏—Å—Ç–æ—á–Ω–∏–∫–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç –µ–¥–∏–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç –¥–ª—è `utm_content`:

```
{–≥–æ—Ä–æ–¥}_{–¥–µ–Ω—å}_{–º–µ—Å—è—Ü}
```

–ü—Ä–∏–º–µ—Ä—ã:
- `tomsk_05_10`
- `moscow_12_11`
- `spb_15_09`

### –ü—Ä–∏–º–µ—Ä—ã UTM-—Ç–µ–≥–æ–≤

#### –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç
```
utm_source=yandex&utm_medium=cpc&utm_campaign={campaign_id}&utm_content=tomsk_05_10
```

#### VK Ads
```
utm_source=vkontakte&utm_medium=cpc&utm_content=tomsk_05_10
```

#### –ü–æ—Å–µ–≤
```
utm_source=posev&utm_medium=dd.mm&utm_campaign=gruppa_posev&utm_content=tomsk_05_10
```

#### –î–∏—Ä–µ–∫—Ç-–∫–æ–Ω—Ç–∞–∫—Ç—ã
```
utm_source=dk&utm_content=tomsk_05_10
```

## –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π —Å —Ä–µ–∞–ª—å–Ω—ã–º–∏ –¥–∞–Ω–Ω—ã–º–∏

### 1. QTickets

```bash
# –ó–∞–ø—É—Å–∫ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ QTickets
cd dashboard-mvp
python3 integrations/qtickets/loader.py --env secrets/.env.qtickets --days 7

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
docker exec ch-zakaz clickhouse-client --database=zakaz --query "SELECT count() FROM stg_qtickets_sales_raw"
```

### 2. Google Sheets

```bash
# –ó–∞–ø—É—Å–∫ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ Google Sheets
cd dashboard-mvp
python3 archive/sheets/init.py
python3 archive/sheets/validate.py

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
docker exec ch-zakaz clickhouse-client --database=zakaz --query "SELECT count() FROM stg_google_sheets_raw"
```

### 3. VK Ads

```bash
# –ó–∞–ø—É—Å–∫ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ VK Ads
cd dashboard-mvp
python3 integrations/vk_ads/loader.py --env secrets/.env.vk --days 7

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
docker exec ch-zakaz clickhouse-client --database=zakaz --query "SELECT count() FROM fact_vk_ads_daily"
```

### 4. –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç

```bash
# –ó–∞–ø—É—Å–∫ –∑–∞–≥—Ä—É–∑—á–∏–∫–∞ –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç
cd dashboard-mvp
python3 integrations/direct/loader.py --env secrets/.env.direct --days 7

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
docker exec ch-zakaz clickhouse-client --database=zakaz --query "SELECT count() FROM fact_direct_daily"
```

## –ü—Ä–æ–≤–µ—Ä–∫–∞ –¥–∞–Ω–Ω—ã—Ö –≤ ClickHouse

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–µ–∂–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–≤–µ–∂–µ—Å—Ç–∏ –¥–∞–Ω–Ω—ã—Ö –ø–æ –≤—Å–µ–º –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º
SELECT 
    'qtickets' as source,
    max(event_date) as latest_date,
    today() - max(event_date) as days_behind
FROM zakaz.stg_qtickets_sales_raw

UNION ALL

SELECT 
    'sheets' as source,
    max(event_date) as latest_date,
    today() - max(event_date) as days_behind
FROM zakaz.stg_google_sheets_raw

UNION ALL

SELECT 
    'vk_ads' as source,
    max(stat_date) as latest_date,
    today() - max(stat_date) as days_behind
FROM zakaz.fact_vk_ads_daily

UNION ALL

SELECT 
    'direct' as source,
    max(stat_date) as latest_date,
    today() - max(stat_date) as days_behind
FROM zakaz.fact_direct_daily
ORDER BY source;
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ –∫–∞—á–µ—Å—Ç–≤–∞ –¥–∞–Ω–Ω—ã—Ö

```sql
-- –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ –¥—É–±–ª–∏–∫–∞—Ç—ã –≤ –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥–∞–∂
SELECT 
    source,
    count() - countDistinct(src_msg_id) as duplicates
FROM (
    SELECT 'qtickets' as source, src_msg_id FROM zakaz.stg_qtickets_sales_raw
    UNION ALL
    SELECT 'sheets' as source, src_msg_id FROM zakaz.stg_google_sheets_raw
)
GROUP BY source;
```

## –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–π –∑–∞–≥—Ä—É–∑–∫–∏

### Systemd —Ç–∞–π–º–µ—Ä—ã

```bash
# –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∞–π–º–µ—Ä–æ–≤
cd dashboard-mvp
bash ops/setup_timers.sh

# –ó–∞–ø—É—Å–∫ —Ç–∞–π–º–µ—Ä–æ–≤
sudo systemctl enable etl@qtickets.timer
sudo systemctl enable etl@google_sheets.timer
sudo systemctl enable etl@vk_ads.timer
sudo systemctl enable etl@direct.timer

sudo systemctl start etl@qtickets.timer
sudo systemctl start etl@google_sheets.timer
sudo systemctl start etl@vk_ads.timer
sudo systemctl start etl@direct.timer

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞
systemctl list-timers | grep -E 'qtickets|sheets|vk_ads|direct'
```

## –ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–¥–∞–∂

–ú–µ—Ç—Ä–∏–∫–∏ –ø—Ä–æ–¥–∞–∂ —É—á–∏—Ç—ã–≤–∞—é—Ç—Å—è –∫–∞–∫ –≤—ã—Ä—É—á–∫–∞ –º–∏–Ω—É—Å –≤–æ–∑–≤—Ä–∞—Ç—ã (—Å—É–º–º–∞ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤).

### –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ

```sql
-- –ê–≥—Ä–µ–≥–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ –ø–æ –ø—Ä–æ–¥–∞–∂–∞–º –∏–∑ –≤—Å–µ—Ö –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
SELECT
    d,
    city,
    SUM(tickets_sold) as tickets_total,
    SUM(revenue - refunds_amount) as revenue_total
FROM (
    SELECT event_date as d, city, tickets_sold, revenue, refunds_amount FROM zakaz.stg_qtickets_sales_raw
    UNION ALL
    SELECT event_date as d, city, tickets_sold, revenue, refunds_amount FROM zakaz.stg_google_sheets_raw
)
WHERE event_date >= today() - 30
GROUP BY d, city
ORDER BY d DESC, revenue_total DESC;
```

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–æ–∫–µ–Ω—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ä–æ–∫ –¥–µ–π—Å—Ç–≤–∏—è —Ç–æ–∫–µ–Ω–æ–≤
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ —É —Ç–æ–∫–µ–Ω—ã –µ—Å—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ –ø—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å —Ñ–æ—Ä–º–∞—Ç–∞ –≤ —Ñ–∞–π–ª–∞—Ö .env

### –ü—Ä–æ–±–ª–µ–º–∞: Google Sheets –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
1. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω –¥–æ—Å—Ç—É–ø Editor
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Å–µ—Ä–≤–∏—Å–Ω—ã–π –∞–∫–∫–∞—É–Ω—Ç —Å–æ–∑–¥–∞–Ω –¥–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ Drive API
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ ID —Ç–∞–±–ª–∏—Ü—ã –≤ —Ñ–∞–π–ª–µ .env

### –ü—Ä–æ–±–ª–µ–º–∞: VK Ads API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ statistics, campaigns, ads
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ ID –∫–∞–±–∏–Ω–µ—Ç–æ–≤ –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã API VK Ads

### –ü—Ä–æ–±–ª–µ–º–∞: –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –æ—à–∏–±–∫—É

**–†–µ—à–µ–Ω–∏–µ:**
1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ —Ç–æ–∫–µ–Ω –∏–º–µ–µ—Ç –ø—Ä–∞–≤–∞ campaigns, reports, stats
2. –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –ª–æ–≥–∏–Ω –∏ —Ç–æ–∫–µ–Ω –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ
3. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–∏–º–∏—Ç—ã API –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç

## –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### –ü—Ä–æ—Å–º–æ—Ç—Ä –∏—Å—Ç–æ—Ä–∏–∏ –∑–∞–ø—É—Å–∫–æ–≤

```sql
-- –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö –∑–∞–ø—É—Å–∫–æ–≤
SELECT 
    job,
    started_at,
    finished_at,
    status,
    rows_processed,
    message
FROM zakaz.meta_job_runs
ORDER BY started_at DESC
LIMIT 10;
```

### –õ–æ–≥–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–π

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ QTickets
tail -f logs/qtickets.log

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ VK Ads
tail -f logs/vk_ads.log

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –Ø–Ω–¥–µ–∫—Å.–î–∏—Ä–µ–∫—Ç
tail -f logs/direct.log

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ Google Sheets
tail -f logs/sheets.log
```

---

**–°—Ç–∞—Ç—É—Å**: üü° –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –≥–æ—Ç–æ–≤–∞, —Ç—Ä–µ–±—É–µ—Ç—Å—è —Å–æ–∑–¥–∞–Ω–∏–µ —Ñ–∞–π–ª–æ–≤ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
**–î–∞—Ç–∞**: 20.10.2025
**–í–µ—Ä—Å–∏—è**: 1.0.0